{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Users/taylo/source/react/Legato/sj2legato/savelegato/src/components/messageStudenthw.js\";\nimport React, { Component } from 'react';\nimport AuthService from \"../services/auth.service\";\nimport authService from \"../services/auth.service\";\nimport moment from 'moment';\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\naxios.defaults.xsrfCookieName = 'csrftoken';\naxios.defaults.xsrfHeaderName = 'X-CSRFToken'; //import PropTypes from 'prop-types';\n//allows me to create a dialog box to pop up for adding students with names and emails.\n\nexport default class Hwmessage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = event => {\n      const {\n        name,\n        value\n      } = event.target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.message = this.message.bind(this);\n    this.state = {\n      firstMessage: this.props.firstMessage,\n      messages: this.props.messages,\n      message: \"\",\n      placeholder: \"\",\n      picture: \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\",\n      tpicture: \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\",\n      spicture: \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\",\n      placeholder: \"Message this student about this homework\",\n      currentUser: AuthService.getCurrentUser()\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.role === \"student\") {\n      this.setState({\n        placeholder: \"Message your teacher\"\n      });\n      let id = this.state.currentUser.account[0].userID; //console.log(id);\n\n      const API_URL = \"https://legato.flinnapps.com/api/auth/\";\n      axios.post(API_URL + \"getuser\", {\n        id\n      }).then(response => {\n        //console.log(response.data);\n        this.setState({\n          realtimeusr: response.data.user\n        });\n\n        if (this.state.realtimeusr.profilepic) {\n          const porfilePic = this.state.realtimeusr.profilepic;\n          this.setState({\n            tpicture: porfilePic\n          });\n        }\n      });\n    }\n  }\n\n  message() {\n    var m1 = moment().format('MMMM Do YYYY, h:mm:ss a');\n\n    if (this.state.message !== '') {\n      let M = this.state.messages;\n      let J = {\n        m: this.state.message,\n        date: m1,\n        role: this.props.role\n      };\n      M.push(J);\n      this.setState({\n        firstMessage: false,\n        messages: M\n      });\n      authService.hwmessage(this.props.id, this.state.message, m1, this.props.role);\n    }\n\n    this.setState({\n      message: \"\"\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        borderTop: \"1px solid gray\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: \"15px\"\n        },\n        children: [this.props.role === \"teacher\" ? /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            marginBottom: \"10px\"\n          },\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Message Student:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 88\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 51\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            marginBottom: \"10px\"\n          },\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Message Teacher:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 156\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 119\n        }, this), this.state.firstMessage ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            height: \"200px\",\n            borderTop: \"1px solid green\",\n            borderLeft: \"1px solid green\",\n            borderRight: \"1px solid green\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flexDirection: \"column\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: \"100%\",\n                height: \"100px\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  width: \"100px\",\n                  height: \"100px\",\n                  float: \"left\",\n                  marginLeft: \"10px\",\n                  marginTop: \"10px\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: this.state.picture,\n                  alt: \"profile-img\",\n                  className: \"profile-img-card cropped1\",\n                  style: {\n                    alignSelf: \"flex-start\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 25\n            }, this), this.props.role === \"teacher\" ? /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                marginLeft: \"20px\",\n                marginTop: \"20px\",\n                color: \"gray\"\n              },\n              children: \"This is your first message about this homework to this student. \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 55\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                marginLeft: \"20px\",\n                marginTop: \"20px\",\n                color: \"gray\"\n              },\n              children: \"This is your first message about this homework to your teacher. \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 27\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            height: \"200px\",\n            borderTop: \"1px solid green\",\n            borderLeft: \"1px solid green\",\n            borderRight: \"1px solid green\",\n            display: \"flex\",\n            flexDirection: \"column\"\n          },\n          children: this.props.role === \"teacher\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"homeworkScroll\",\n            children: this.state.messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: \"100%\",\n                display: \"flex\",\n                flexDirection: \"column\"\n              },\n              children: message.role === \"teacher\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  width: \"50%\",\n                  alignSelf: \"flex-end\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginRight: \"15px\",\n                    marginTop: \"7px\",\n                    background: \"#C8CAE4\",\n                    padding: \"5px\",\n                    paddingLeft: '15px',\n                    paddingRight: '10px',\n                    borderRadius: \"20px\"\n                  },\n                  children: message.m\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 49\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 41\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: \"flex\",\n                  flexDirection: 'row',\n                  marginTop: \"10px\",\n                  width: \"50%\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: this.state.spicture,\n                  alt: \"teacher\",\n                  className: \"proStudpicturemessage\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    alignSelf: \"flex-start\",\n                    background: \"#696eb5\",\n                    color: \"#F0F2EF\",\n                    padding: \"5px\",\n                    paddingLeft: '15px',\n                    paddingRight: '10px',\n                    borderRadius: \"20px\"\n                  },\n                  children: message.m\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 45\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 63\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"homeworkScroll\",\n            children: this.state.messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: \"100%\",\n                display: \"flex\",\n                flexDirection: \"column\"\n              },\n              children: message.role === \"teacher\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: \"flex\",\n                  flexDirection: 'row',\n                  marginTop: \"10px\",\n                  width: \"50%\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: this.state.tpicture,\n                  alt: \"teacher\",\n                  className: \"proStudpicturemessage\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 162,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    alignSelf: \"flex-start\",\n                    background: \"#696eb5\",\n                    color: \"#F0F2EF\",\n                    padding: \"5px\",\n                    paddingLeft: '15px',\n                    paddingRight: '10px',\n                    borderRadius: \"20px\"\n                  },\n                  children: message.m\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 72\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  width: \"50%\",\n                  alignSelf: \"flex-end\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginRight: \"15px\",\n                    marginTop: \"7px\",\n                    background: \"#C8CAE4\",\n                    padding: \"5px\",\n                    paddingLeft: '15px',\n                    paddingRight: '10px',\n                    borderRadius: \"20px\"\n                  },\n                  children: message.m\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 49\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 52\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 42\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            flexDirection: \"row\",\n            marginBottom: \"20px\"\n          },\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"fill2\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                rows: \"1\",\n                id: \"message\",\n                value: this.state.message,\n                placeholder: this.state.placeholder,\n                onChange: this.handleChange,\n                name: \"message\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 108\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-block\",\n              style: {\n                background: \"#696eb5\",\n                color: \"#F0F2EF\",\n                width: \"60px\"\n              },\n              onClick: this.message,\n              children: \"Send\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 32\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }, this);\n  }\n\n} //Homeworking.propTypes = {\n//   children: PropTypes.element.isRequired,\n//};","map":{"version":3,"sources":["/mnt/c/Users/taylo/source/react/Legato/sj2legato/savelegato/src/components/messageStudenthw.js"],"names":["React","Component","AuthService","authService","moment","axios","defaults","xsrfCookieName","xsrfHeaderName","Hwmessage","constructor","props","handleChange","event","name","value","target","setState","bind","message","state","firstMessage","messages","placeholder","picture","tpicture","spicture","currentUser","getCurrentUser","componentDidMount","role","id","account","userID","API_URL","post","then","response","realtimeusr","data","user","profilepic","porfilePic","m1","format","M","J","m","date","push","hwmessage","render","borderTop","marginTop","marginBottom","height","borderLeft","borderRight","flexDirection","width","float","marginLeft","alignSelf","color","display","map","index","marginRight","background","padding","paddingLeft","paddingRight","borderRadius"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport AuthService from \"../services/auth.service\";\r\n\r\nimport authService from \"../services/auth.service\";\r\nimport moment from 'moment';\r\nimport axios from \"axios\";\r\n\r\naxios.defaults.xsrfCookieName = 'csrftoken';\r\naxios.defaults.xsrfHeaderName = 'X-CSRFToken';\r\n//import PropTypes from 'prop-types';\r\n\r\n\r\n//allows me to create a dialog box to pop up for adding students with names and emails.\r\nexport default class Hwmessage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.message = this.message.bind(this);\r\n\r\n\r\n        \r\n        this.state = {\r\n            firstMessage: this.props.firstMessage,\r\n            messages: this.props.messages,\r\n            message: \"\",\r\n            placeholder:\"\",\r\n            picture: \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\",\r\n            tpicture: \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\",\r\n            spicture: \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\",\r\n            placeholder: \"Message this student about this homework\",\r\n            currentUser: AuthService.getCurrentUser(),\r\n\r\n        }\r\n       \r\n\r\n    }\r\n    componentDidMount() {\r\n        if(this.props.role===\"student\"){\r\n        this.setState({placeholder:\"Message your teacher\"})\r\n        let id = this.state.currentUser.account[0].userID;\r\n        //console.log(id);\r\n\r\n        const API_URL = \"https://legato.flinnapps.com/api/auth/\";\r\n       \r\n        axios.post(API_URL + \"getuser\", {\r\n            id,\r\n\r\n        }).then(response => {\r\n            //console.log(response.data);\r\n\r\n            this.setState({ realtimeusr: response.data.user })\r\n            \r\n            if (this.state.realtimeusr.profilepic) {\r\n                const porfilePic = this.state.realtimeusr.profilepic;\r\n                this.setState({ tpicture: porfilePic });\r\n            }\r\n            \r\n            \r\n        });\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n    message() {\r\n        var m1 = moment().format('MMMM Do YYYY, h:mm:ss a');\r\n\r\n        if (this.state.message !== '') {\r\n            let M = this.state.messages;\r\n                let J = {\r\n                    m: this.state.message,\r\n                    date: m1,\r\n                    role: this.props.role,\r\n                }\r\n            \r\n            \r\n            \r\n            M.push(J);\r\n            this.setState({\r\n                firstMessage: false,\r\n                messages:M,\r\n            })\r\n            authService.hwmessage(this.props.id, this.state.message, m1, this.props.role);\r\n        }\r\n\r\n        this.setState({\r\n            message:\"\",\r\n        })\r\n\r\n    }\r\n    handleChange = (event) => {\r\n        const { name, value } = event.target\r\n\r\n        this.setState({\r\n            [name]: value,\r\n        })\r\n    }\r\n    \r\n\r\n    render() {\r\n\r\n        return (\r\n           \r\n                    \r\n\r\n                        <div style={{ borderTop: \"1px solid gray\" }} >\r\n                           \r\n\r\n                <div style={{ marginTop: \"15px\", }}>\r\n                    {this.props.role===\"teacher\"?(<p style={{ marginBottom: \"10px\" }}> <b>Message Student:</b> </p>):(<p style={{ marginBottom: \"10px\" }}> <b>Message Teacher:</b> </p>)}\r\n\r\n                    \r\n                    {this.state.firstMessage ? (\r\n\r\n                        < div style={{ height: \"200px\", borderTop: \"1px solid green\", borderLeft: \"1px solid green\", borderRight: \"1px solid green\" }}>\r\n                                    <div style={{ flexDirection: \"column\" }}>\r\n                        <div style={{ width: \"100%\", height: \"100px\", }}>\r\n                            <div style={{ width: \"100px\", height: \"100px\", float: \"left\", marginLeft: \"10px\", marginTop: \"10px\" }}>\r\n                                <img\r\n                                    src={this.state.picture}\r\n                                    alt=\"profile-img\"\r\n                                    className=\"profile-img-card cropped1\"\r\n                                    style={{ alignSelf: \"flex-start\" }}\r\n\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        {this.props.role===\"teacher\"?(<p style={{ marginLeft: \"20px\", marginTop: \"20px\", color: \"gray\" }}>This is your first message about this homework to this student. </p>)\r\n                        :(<p style={{ marginLeft: \"20px\", marginTop: \"20px\", color: \"gray\" }}>This is your first message about this homework to your teacher. </p>)}\r\n\r\n                        \r\n                    </div>\r\n\r\n                </div>\r\n                    ): (\r\n                <div style={{ height: \"200px\", borderTop: \"1px solid green\", borderLeft: \"1px solid green\", borderRight: \"1px solid green\", display:\"flex\", flexDirection:\"column\"}}>\r\n                                \r\n                                {this.props.role===\"teacher\"?(<div className=\"homeworkScroll\">\r\n\r\n                                    {this.state.messages.map((message, index) =>\r\n                                    <div key={index} style={{width:\"100%\", display:\"flex\",flexDirection:\"column\", }}>\r\n                                        {message.role === \"teacher\" ? (\r\n                                        <div style={{ width:\"50%\",alignSelf:\"flex-end\"}}>\r\n                                                <div style={{  marginRight:\"15px\", marginTop:\"7px\", background:\"#C8CAE4\", padding:\"5px\", paddingLeft:'15px', paddingRight:'10px', borderRadius:\"20px\" }}>{message.m}</div> </div>\r\n                                            \r\n                                        ) : (\r\n                                            <div style={{display:\"flex\", flexDirection:'row', marginTop:\"10px\", width:\"50%\"}}>\r\n                                            <img src = {this.state.spicture} alt=\"teacher\" className=\"proStudpicturemessage\"/>\r\n                                            <div style={{alignSelf:\"flex-start\" ,  background:\"#696eb5\", color:\"#F0F2EF\", padding:\"5px\", paddingLeft:'15px', paddingRight:'10px', borderRadius:\"20px\"}}>{message.m}</div>\r\n                                        </div>)}\r\n                                    </div>\r\n                                    )\r\n\r\n                                }\r\n                                </div>):(<div className=\"homeworkScroll\">\r\n\r\n\r\n                                    {this.state.messages.map((message, index) =>\r\n                                    <div key={index} style={{width:\"100%\", display:\"flex\", flexDirection:\"column\", }}>\r\n                                        {message.role === \"teacher\" ? (<div style={{display:\"flex\", flexDirection:'row', marginTop:\"10px\", width:\"50%\"}}>\r\n                                            <img src = {this.state.tpicture} alt=\"teacher\" className=\"proStudpicturemessage\"/>\r\n                                            <div style={{alignSelf:\"flex-start\" ,  background:\"#696eb5\", color:\"#F0F2EF\", padding:\"5px\", paddingLeft:'15px', paddingRight:'10px', borderRadius:\"20px\"}}>{message.m}</div>\r\n                                        </div>) : (<div style={{ width:\"50%\",alignSelf:\"flex-end\"}}>\r\n                                                <div style={{  marginRight:\"15px\", marginTop:\"7px\", background:\"#C8CAE4\", padding:\"5px\", paddingLeft:'15px', paddingRight:'10px', borderRadius:\"20px\" }}>{message.m}</div> </div>)}\r\n                                    </div>\r\n                                    )\r\n\r\n                                }\r\n                                </div>)}\r\n                                \r\n                                \r\n\r\n\r\n                </div>\r\n                \r\n                \r\n                \r\n                )}\r\n                                \r\n                               <div style={{ display:\"flex\", flexDirection:\"row\", marginBottom:\"20px\", }}> <div className=\"fill2\">\r\n                                    <div className=\"form-group\" >\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            className=\"form-control\"\r\n                                            rows=\"1\"\r\n                                id=\"message\"\r\n                                value={this.state.message}\r\n                                            placeholder={this.state.placeholder}\r\n                                            onChange={this.handleChange}\r\n                                name=\"message\"\r\n                                        />\r\n                                    </div>\r\n\r\n                    </div>\r\n                    <div>\r\n                        <button className=\"btn btn-block\" style={{ background: \"#696eb5\", color: \"#F0F2EF\", width: \"60px\", }} onClick={this.message}>Send</button>\r\n\r\n                        </div>\r\n                        </div>\r\n\r\n                            </div>\r\n\r\n                        \r\n                   \r\n                    \r\n                </div>\r\n            \r\n            \r\n\r\n        )\r\n\r\n    }\r\n}\r\n//Homeworking.propTypes = {\r\n //   children: PropTypes.element.isRequired,\r\n//};\r\n\r\n"]},"metadata":{},"sourceType":"module"}